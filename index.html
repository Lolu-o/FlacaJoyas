<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Las Flacas Joyas ‚Äî Hecho a mano en Chile</title>
  <meta name="description" content="Joyas artesanales: Arcilla polim√©rica. Hechas a mano en Chile.">
  <meta property="og:title" content="Las Flacas Joyas">
  <meta property="og:description" content="Arcilla polim√©rica, amor por el detalle.">
  <meta property="og:type" content="website">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" href="Estilos.css">
</head>

<body>
  <header class="topbar">
    <div class="container nav">
      <a class="brand" href="#inicio" aria-label="Ir al inicio">
        <span>LA&nbsp;FLACA&nbsp;JOYAS¬Æ</span>
      </a>

      <div class="search"><a id="miCarrito" class="btn" href="carrito.html" aria-label="Ver carrito"
          style="padding: 0 12px; font-size: 1.2rem;">üõí</a></div>

      <nav class="menu" aria-label="Principal">
        <a href="tienda.html">Tienda</a>
        <a href="colecciones.html">Colecciones</a>
        <a href="blog.html">Blog</a>
        <a href="ayuda.html">Ayuda</a>
        <a href="nosotros.html">Nosotros</a>
      </nav>
      <a href="cuenta.html" id="user-btn" class="icon-btn icon-user" aria-label="Abrir cuenta">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <circle cx="12" cy="7" r="4"></circle>
          <path d="M5.5 21a6.5 6.5 0 0 1 13 0"></path>
        </svg>
      </a>
      <a id="admin-btn" class="btn gold" href="admin.html" style="display:none;">Admin</a>
    </div>
  </header>

  <main id="inicio" class="hero">
    <section class="hero-card">
      <img class="logo-hero" src="assets/logo-la-flaca.png" alt="LA FLACA JOYAS" />
      <h1>Joyas artesanales con car√°cter</h1>
      <p>Dise√±os √∫nicos en arcilla y metales, hechos a mano en Chile.</p>
      <a href="tienda.html" class="cta">SHOP NOW</a>
    </section>
  </main>
  <section id="quienes-somos">
    <div>
      <h2>Qui√©nes somos</h2>
      <p class="muted">Taller chileno de joyer√≠a artesanal. Piezas hipoalerg√©nicas en peque√±os lotes.</p>
    </div>
  </section>
  <div class="container" style="display: grid; gap: 40px; margin-top: 32px;">
    <section id="redes-sociales">
      <div>
        <h1 class="h1">S√≠guenos en Instagram</h1>
        <div class="iconos-redes">
          <a href="https://www.instagram.com/laflaca_joyas/" target="_blank" rel="noopener noreferrer"
            aria-label="Visita nuestro Instagram" title="Instagram">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              style="color: var(--primary);">
              <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
              <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
              <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
            </svg>
          </a>
        </div>
      </div>
    </section>

    <section class="card" style="overflow: hidden; padding: 0;">
      <div style="display: grid; grid-template-columns: 1fr 1fr; min-height: 300px;">
        <div style="padding: 40px; display: flex; flex-direction: column; justify-content: center;">
          <span class="tag" style="width: fit-content; margin-bottom: 10px;">Nuevo Lanzamiento</span>
          <h2 style="font-family: 'Playfair Display', serif; font-size: 2rem; margin: 0 0 16px; color: var(--brand);">
            Colecci√≥n Amanecer</h2>
          <p class="muted" style="margin-bottom: 24px; line-height: 1.6;">
            Inspirada en los primeros rayos de sol del valle. Una fusi√≥n √∫nica de arcilla polim√©rica en tonos terracota
            y detalles en ba√±o de oro de 18k. Piezas que cuentan historias.
          </p>
          <div class="row wrap">
            <input class="input" placeholder="Tu correo para novedades" style="max-width: 250px;">
            <button class="btn primary">Suscribirme</button>
          </div>
        </div>
        <div style="background: url('assets/placeholder.jpg') center/cover no-repeat; min-height: 250px;"></div>
      </div>
    </section>

    <section>
      <h2 class="h2">Los m√°s vendidos</h2>
      <div id="best" class="grid-4"></div>
    </section>

    <section>
      <h2 class="h2">Por qu√© elegirnos</h2>
      <div class="grid-3">
        <div class="card hover"><strong>Hecho a Mano</strong>
          <p class="muted">Cada pieza es modelada y ensamblada en nuestro taller en Chile.</p>
        </div>
        <div class="card hover"><strong>Hipoalerg√©nico</strong>
          <p class="muted">Usamos acero quir√∫rgico y ba√±os libres de n√≠quel.</p>
        </div>
        <div class="card hover"><strong>Garant√≠a</strong>
          <p class="muted">3 meses de garant√≠a legal en todas tus joyas.</p>
        </div>
      </div>
    </section>
  </div>

  <div id="accountModal" class="modal" aria-hidden="true">
    <div class="card" role="dialog" aria-modal="true" aria-labelledby="accTitle">
      <button class="x" data-close="#accountModal" aria-label="Cerrar">√ó</button>
      <div class="separadorDialogoBoton">
        <div class="contenedorDeDialogos">
          <div id="tab-login" class="tab active" aria-labelledby="accTitle">
            <h3 id="accTitle" class="title">Iniciar sesi√≥n</h3>
            <p class="muted">Accede con tu email y contrase√±a.</p>
            <form>
              <div class="field">
                <label for="loginEmail">Email</label>
                <input id="loginEmail" type="text" autocomplete="username" placeholder="Email o Usuario" required />
              </div>
              <div class="field pwrap">
                <label for="loginPass">Contrase√±a</label>
                <input id="loginPass" type="password" minlength="8" autocomplete="current-password" required />
                <span class="eye" id="eyeLogin" title="Mostrar/Ocultar">üëÅ</span>
                <small class="muted">M√≠nimo 8 caracteres</small>
              </div>
              <button class="btn primary block" type="submit">Iniciar sesi√≥n</button>
            </form>
            <div style="margin-top:12px;display:grid;gap:10px;place-items:center">
              <a href="#" class="link" id="goto-forgot">Olvid√© mi contrase√±a</a>
              <div class="row">
                <span class="muted">¬øNo tienes cuenta?</span>
                <a href="#" class="link" id="goto-register">Registrarme</a>
              </div>
            </div>
          </div>

          <div id="tab-register" class="tab" aria-label="Registro">
            <h3 class="title">Crear cuenta</h3>
            <p class="muted">Crea tu cuenta para comprar y seguir tus pedidos.</p>
            <form onsubmit="event.preventDefault();alert('Registro simulado...');">
              <div class="field"><label for="regName">Nombre</label><input id="regName" required /></div>
              <div class="field"><label for="regEmail">Email</label><input id="regEmail" type="email"
                  autocomplete="email" required /></div>
              <div class="field pwrap">
                <label for="regPass">Contrase√±a</label>
                <input id="regPass" type="password" minlength="8" autocomplete="new-password" required />
                <span class="eye" id="eyeReg">üëÅ</span>
              </div>
              <button class="btn primary block" type="submit">Crear cuenta</button>
            </form>
            <div style="margin-top:12px;text-align:center">
              <a href="#" class="link" id="back-login-1">Volver a iniciar sesi√≥n</a>
            </div>
          </div>

          <div id="tab-forgot" class="tab" aria-label="Recuperar contrase√±a">
            <h3 class="title">Recuperar contrase√±a</h3>
            <p class="muted">Ingresa tu email y te enviaremos instrucciones.</p>
            <form onsubmit="event.preventDefault();alert('Si tu email existe, enviaremos un enlace de recuperaci√≥n.');">
              <div class="field"><label for="recEmail">Email</label><input id="recEmail" type="email" required />
              </div>
              <div class="row" style="margin-top:6px">
                <button class="btn primary" type="submit">Enviar</button>
                <button class="btn ghost" type="button" id="back-login-2">Volver</button>
              </div>
            </form>
          </div>
        </div>
        <div id="botonesDeAccion">
          <button id="tabBtnLogin" class="btn ghost">Login</button>
          <button id="tabBtnRegister" class="btn ghost">Registro</button>
          <button id="tabBtnForgot" class="btn ghost">Recuperar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="toast" role="status" aria-live="polite"></div>

<footer class="footer">
    <div class="container footer-grid">
      <div><strong>Las Flacas Joyas</strong>
        <p class="muted">Dise√±os √∫nicos en arcilla polim√©rica. Hecho a mano en Chile.</p>
      </div>
      <div>
        <small class="muted">Ayuda</small><br>
        <a href="ayuda.html">Env√≠os y devoluciones</a><br>
        <a href="politicas.html">Pol√≠ticas</a>
      </div>
      <div>
        <small class="muted">Contacto</small><br>
        <a href="contacto.html">Formulario & WhatsApp</a>
      </div>
      <div>
        <small class="muted">Cuenta</small><br>
        <a href="cuenta.html">Ingresar / Registro</a><br>
      </div>
    </div>
</footer>

  <script src="app.js"></script>
  <script>
    // 1. Cargar Best Sellers usando la nueva funci√≥n (Punto 7)
    const topProducts = getBestSellers(4);
    const bestContainer = document.getElementById('best');
    
    if (topProducts.length > 0) {
        bestContainer.innerHTML = topProducts.map(p => {
            const imgUrl = (p.media && p.media.length > 0) ? p.media[0].url : 'assets/placeholder.jpg';
            return `
                <a class="card product-card" href="producto.html?slug=${p.slug}">
                <img class="product-card-img" src="${imgUrl}" alt="${p.nombre}">
                <div class="row" style="justify-content:space-between">
                    <strong>${p.nombre}</strong>
                    <span class="tag">‚òÖ ${p.rating}</span>
                </div>
                <div class="price">${money(p.precio)}</div>
                </a>
            `;
        }).join('');
    } else {
        bestContainer.innerHTML = '<p class="muted">Cargando novedades...</p>';
    }

    // 2. L√≥gica del Buscador
    const searchInput = document.getElementById('q');
    if (searchInput) {
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') { location.href = 'tienda.html?q=' + encodeURIComponent(e.target.value); }
        });
    }

    // 3. Indicador de Sesi√≥n en Header
    document.addEventListener('DOMContentLoaded', () => {
        const user = getUser();
        if (user) {
            const btn = document.getElementById('user-btn');
            if (btn) {
                btn.style.color = 'var(--primary)';
                btn.setAttribute('title', `Hola, ${user.nombre}`);
            }
        }
    });

    // 4. MODAL: L√≥gica de Login y Registro (Punto 6)
    // Login
    const loginForm = document.querySelector('#tab-login form');
    if(loginForm) {
        loginForm.onsubmit = (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const pass = document.getElementById('loginPass').value;
            
            const user = login(email, pass);
            if(user) {
                location.reload(); // Recargar para actualizar header
            } else {
                alert('Credenciales incorrectas');
            }
        };
    }

    // Registro
    const regForm = document.querySelector('#tab-register form');
    if(regForm) {
        regForm.onsubmit = (e) => {
            e.preventDefault();
            const name = document.getElementById('regName').value;
            const email = document.getElementById('regEmail').value;
            const pass = document.getElementById('regPass').value;

            const res = register(name, email, pass);
            if(res.ok) {
                alert('¬°Cuenta creada! Has iniciado sesi√≥n.');
                location.reload();
            } else {
                alert('Error: ' + res.msg);
            }
        };
    }
  </script>
</body>

</html>